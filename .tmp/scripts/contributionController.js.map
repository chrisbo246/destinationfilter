{"version":3,"sources":["../../app/scripts/contributionController.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAcA,IAAI,kBAAkB,GAAG,CAAC,YAAY;AAClC,gBAAY,CAAC;;AAEb,KAAC,CAAC,YAAY;;AAEV,SAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,GAAG,CAAC,cAAc,EAAE,UAAU,CAAC,EAAE;;AAE9E,aAAC,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,YAAY;;AAErD,oBAAI,KAAK,GAAG,CAAC,CAAC,oBAAoB,CAAC,CAAC;AACpC,qBAAK,CACA,kBAAkB,CACf,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,OAAO,CAAC,kBAAkB,EAAE;AAC/C,0BAAM,EAAE;AACJ,sCAAc,EAAE;AACZ,oCAAQ,EAAE,kBAAkB;AAC5B,sCAAU,EAAE;AACR,wCAAQ,EAAE;AACN,2CAAO,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,kCAAkC,CAAC;iCAChE;AACD,uCAAO,EAAE;AACL,2CAAO,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,iCAAiC,CAAC;iCAC/D;6BACJ;yBACJ;qBACJ;iBACJ,CAAC,CACL,CACA,EAAE,CAAC,eAAe,EAAE,YAAY;AAC7B,qBAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;iBACrC,CAAC,CACD,EAAE,CAAC,iBAAiB,EAAE,YAAY;AAC/B,yBAAK,CAAC,SAAS,CAAC,CAAC;AACjB,qBAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;iBACxC,CAAC,CAAC;;;AAIP,iBAAC,CAAC,SAAS,CAAC,yCAAyC,EAAE,UAAU,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE;;AAEtF,wBAAI,OAAO,GAAG,cAAc,CAAC,SAAS,CAAC;AACnC,2BAAG,EAAE,kCAAkC;;AAEvC,6BAAK,EAAE,iBAAY;;;yBAGlB;qBACJ,CAAC,CAAC;;AAEH,qBAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;AAClC,yBAAC,CAAC,cAAc,EAAE,CAAC;AACnB,4BAAI,MAAM,GAAG,CAAC,CAAC,kBAAkB,CAAC,CAAC,GAAG,EAAE,CAAC;;AAEzC,+BAAO,CAAC,IAAI,CAAC;AACT,gCAAI,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC;AAClC,uCAAW,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,sBAAsB,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;AACzE,oCAAQ,EAAE,KAAK;AACf,kCAAM,EAAE,MAAM,GAAG,GAAG;AACpB,sCAAU,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,gCAAgC,CAAC;yBACjE,CAAC,CAAC;AACH,yBAAC,CAAC,cAAc,EAAE,CAAC;qBACtB,CAAC,CAAC;;;AAGH,qBAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,YAAY;AACjC,+BAAO,CAAC,KAAK,EAAE,CAAC;qBACnB,CAAC,CAAC;iBAEN,CAAC,CAAC;aACN,CAAC,CAAC;SAEN,CAAC,CAAC;KAEN,CAAC,CAAC;CAEN,CAAA,EAAG,CAAC","file":"contributionController.js","sourcesContent":["/*old-jslint indent: 2, unparam: true, plusplus: true */\r\n/*\r\njslint\r\n    devel: true,\r\n    browser: true,\r\n    node: false\r\n*/\r\n/*\r\nglobal\r\n    $,\r\n    StripeCheckout,\r\n    options: true\r\n*/\r\n\r\nvar contributionModule = (function () {\r\n    'use strict';\r\n\r\n    $(function () {\r\n            \r\n        $('.navbar').find('[href=\"#contribution_pane\"]').one('shown.bs.tab', function (e) {\r\n            \r\n            $.when(appModule.deferred.init.i18next).done(function () {\r\n\r\n                var $form = $('#contribution_form');\r\n                $form\r\n                    .bootstrapValidator(\r\n                        $.extend({}, appModule.options.bootstrapValidator, {\r\n                            fields: {\r\n                                donationAmount: {\r\n                                    selector: '#donation_amount',\r\n                                    validators: {\r\n                                        notEmpty: {\r\n                                            message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                        },\r\n                                        numeric: {\r\n                                            message: appModule.i18n.t('fields:default.messages.numeric')\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                    )\r\n                    .on('error.form.bv', function () {\r\n                        $('#donate').addClass('disabled');\r\n                    })\r\n                    .on('success.form.bv', function () {\r\n                        alert('success');\r\n                        $('#donate').removeClass('disabled');\r\n                    });\r\n                // .bootstrapValidator('validate')\r\n\r\n                        \r\n                $.getScript('https://checkout.stripe.com/checkout.js', function (data, textStatus, jqxhr) {\r\n\r\n                    var handler = StripeCheckout.configure({\r\n                        key: 'pk_live_nkX1aJL9uKcKDMfo1EycnpQE',\r\n                        // image: './images/favicon/chrome-touch-icon-196x196.png',\r\n                        token: function () { // token\r\n                            // Use the token to create the charge with a server-side script.\r\n                            // You can access the token ID with `token.id`\r\n                        }\r\n                    });\r\n            \r\n                    $('#donate').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        var amount = $('#donation_amount').val();\r\n                        // Open Checkout with further options\r\n                        handler.open({\r\n                            name: appModule.i18n.t('app.name'),\r\n                            description: appModule.i18n.t('sections:stripe.info', { amount: amount }),\r\n                            currency: 'eur',\r\n                            amount: amount * 100,\r\n                            panelLabel: appModule.i18n.t('buttons:stripePanelLabel.label')\r\n                        });\r\n                        e.preventDefault();\r\n                    });\r\n\r\n                    // Close Checkout on page navigation\r\n                    $(window).on('popstate', function () {\r\n                        handler.close();\r\n                    });\r\n                \r\n                });\r\n            });\r\n\r\n        });\r\n        \r\n    });\r\n            \r\n})();\r\n\r\n"]}