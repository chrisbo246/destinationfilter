{"version":3,"sources":["../../app/scripts/userProfileController.js"],"names":[],"mappings":"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","file":"userProfileController.js","sourcesContent":["/*old-jslint indent: 2, unparam: true, plusplus: true */\r\n/*\r\njslint\r\n    devel: true,\r\n    browser: true,\r\n    node: false\r\n*/\r\n/*\r\nglobal\r\n    $,\r\n    validationStepPercent,\r\n    deferred: true,\r\n    options: true,\r\n    populateUserProfile,\r\n    userData: true\r\n*/\r\n\r\nvar userProfileModule = (function () {\r\n    'use strict';\r\n    \r\n    /**\r\n     * Populate profil form\r\n     *\r\n     * @param { string } countryCode - Country ISO2 code in lower case\r\n     */\r\n\r\n    var populateUserProfile = function (countryCode) {\r\n        console.time('populateUserProfile(' + countryCode + ')');\r\n\r\n        var $el,\r\n            v,\r\n            max,\r\n            value,\r\n            array = [];\r\n\r\n        $.when(appModule.countriesData).done(function () {\r\n\r\n            v = appModule.countriesData[countryCode];\r\n            \r\n            // Skip if datas are not loaded or country doesn't exists\r\n            if (!v) {\r\n                console.warn('country ' + countryCode + ' have no data'); /* RemoveLogging:skip */\r\n                console.log('appModule.countriesData[' + countryCode + ']', v);\r\n                console.log('appModule.countriesData', appModule.countriesData);\r\n                return false;\r\n            }\r\n\r\n            if (!$('#user_country').val()) {\r\n                $('#user_country').val(v.ISO).trigger('change').trigger('chosen:updated');\r\n            }\r\n            $('#user_citizenships').val(v.ISO).trigger('change').trigger('chosen:updated');\r\n            $('#user_currencies').val(v.currency.CurrencyCode).trigger('change').trigger('chosen:updated');\r\n            $('#user_income_level').val(v.incomeLevel ? oecdIncomeLevels[v.incomeLevel.id] : '').trigger('change').trigger('chosen:updated');\r\n            $('#user_driving_sides').val(v.drivingSide).trigger('change').trigger('chosen:updated');\r\n\r\n            if (v.languagePopulation) {\r\n\r\n                $el = $('#user_speaking_languages');\r\n                $.each(v.languagePopulation, function (j, language) {\r\n                    if (language.officialStatus === 'official') {\r\n                        $el.val(language.type.toLowerCase()).trigger('change').trigger('chosen:updated');\r\n                    }\r\n                });\r\n\r\n                $el = $('#user_reading_languages');\r\n                $.each(v.languagePopulation, function (j, language) {\r\n                    if (language.officialStatus === 'official') {\r\n                        $el.val(language.type.toLowerCase()).trigger('change').trigger('chosen:updated');\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (v.plugs) {\r\n\r\n                array = [];\r\n                $.each(v.plugs, function (i2, plug) {\r\n                    // plug.plugType = plug['Plug Type'].replace(/Type /g, '');\r\n                    array = $.union(array, [plug.plugType]);\r\n                });\r\n                $('#user_plug_types').val(array).trigger('change').trigger('chosen:updated');\r\n\r\n                array = [];\r\n                $.each(v.plugs, function (i2, plug) {\r\n                    // plug.electricPotential = plug.['Electric Potential'].replace(/[\\D,]+/g, '').split(',');\r\n                    array = $.union(array, plug.electricPotentials);\r\n                });\r\n                $('#user_plug_voltages').val(array).trigger('change').trigger('chosen:updated');\r\n\r\n                array = [];\r\n                $.each(v.plugs, function (i2, plug) {\r\n                    // plug.frequencies = plug.Frequency.replace(/[\\D,]+/g, '').split(',');\r\n                    array = $.union(array, plug.frequencies);\r\n                });\r\n                $('#user_plug_frequencies').val(array).trigger('change').trigger('chosen:updated');\r\n\r\n            }\r\n\r\n            if (v.measurementSystem && v.measurementSystem.MeasurementSystem) {\r\n                $('#user_measurement_system').val(v.measurementSystem.MeasurementSystem).trigger('change').trigger('chosen:updated');\r\n            }\r\n\r\n            if (v.religions) {\r\n                $.each(v.religions, function (k, religion) {\r\n                    if (religion.percent && (religion.percent > max || !max)) {\r\n                        max = ~~religion.percent;\r\n                        value = k;\r\n                    }\r\n                });\r\n                $('#user_religion').val(value).trigger('change').trigger('chosen:updated');\r\n            }\r\n\r\n            // Revalidate user profile form\r\n            $('#user_profile_form').bootstrapValidator('validate');\r\n\r\n            console.timeEnd('populateUserProfile(' + countryCode + ')');\r\n            \r\n            return true;\r\n        });\r\n        \r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     */\r\n\r\n    var _userProfileFormValidation = function () {\r\n        console.time('_userProfileFormValidation function executed');\r\n\r\n        var $el = $('#user_profile_form');\r\n\r\n        $.when(appModule.deferred.init.i18next).done(function () {\r\n\r\n            // Field validation\r\n            $el.bootstrapValidator(\r\n                    $.extend({}, appModule.options.bootstrapValidator, {\r\n                        fields: {\r\n                            userCountry: {\r\n                                selector: '#user_country',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userCitizenships: {\r\n                                selector: '#user_citizenships',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userSpeakingLanguages: {\r\n                                selector: '#user_speaking_languages',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userReadingLanguages: {\r\n                                selector: '#user_reading_languages',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userPlugTypes: {\r\n                                selector: '#user_plug_types',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userPlugVoltages: {\r\n                                selector: '#user_plug_voltages',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userPlugFrequencies: {\r\n                                selector: '#user_plug_frequencies',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userCurrencies: {\r\n                                selector: '#user_currencies',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userIncomeLevel: {\r\n                                selector: '#user_income_level',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userDrivingSides: {\r\n                                selector: '#user_driving_sides',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userMeasurementSystem: {\r\n                                selector: '#user_measurement_system',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userFirstDayOfWeek: {\r\n                                selector: '#user_first_day_of_week',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            },\r\n                            userReligion: {\r\n                                selector: '#user_religion',\r\n                                validators: {\r\n                                    notEmpty: {\r\n                                        message: appModule.i18n.t('fields:default.messages.notEmpty')\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                )\r\n                .on('error.form.bv', function () {\r\n                    // alert('userProfile error');\r\n                    appModule.validationStepPercent(0, 0);\r\n                })\r\n                .on('success.form.bv', function () {\r\n                    // alert('userProfile success');\r\n                    appModule.validationStepPercent(0, 100);\r\n                    // Store input values in userData object\r\n                    var $this;\r\n                    $el.find(':input[id]').each(function () {\r\n                        $this = $(this);\r\n                        userData[$this.attr('id').toCamel()] = $this.val();\r\n                    });\r\n                });\r\n            /*.on('status.field.bv', function (e) {\r\n                $el.bootstrapValidator('validate');\r\n            });*/\r\n\r\n        });\r\n\r\n        // .bootstrapValidator('validate'); // formValidation\r\n        $('.navbar').find('a[data-toggle=\"tab\"]')\r\n            /*.one('shown.bs.tab', function (e) {\r\n                var paneId = $(e.target).attr('href');\r\n                // Initialize the chosen plugin when #user_profile_pane become visible for the first time\r\n                if (paneId === '#user_profile_pane') {\r\n                    $el.find('.chosen-select')\r\n                        .chosen(options.chosen);\r\n                }\r\n            })*/\r\n            .on('shown.bs.tab', function (e) {\r\n                var previousPaneId = $(e.relatedTarget).attr('href');\r\n                // Validate profile form each time user leave the #user_profile_pane pane\r\n                if (previousPaneId === '#user_profile_pane') {\r\n                    $el.bootstrapValidator('validate');\r\n                }\r\n            });\r\n        //  .end()\r\n        /*$el.filter(':input')\r\n          .on('change', function () {\r\n            var $this = $(this);\r\n            if ($this.attr('id')) {\r\n              if ($el.bootstrapValidator('revalidateField', $this.attr('id')).isValid()) {\r\n                updateResults();\r\n              }\r\n            }\r\n          });*/\r\n        console.timeEnd('_userProfileFormValidation function executed');\r\n    }\r\n\r\n    \r\n    \r\n    $(function () {\r\n            \r\n        // Load global datas and populate select fields\r\n        // _loadData();\r\n\r\n        // If #user_profile_form have no cookie, try to detect user country and populate the form\r\n        /*if (!$('#user_profile_form').sayt({\r\n                checksaveexists: true\r\n            })) {*/\r\n\r\n\r\n        // Initialize form validation\r\n        //_userProfileFormValidation();\r\n        \r\n        \r\n        // Auto-save / restore forms (with id) from cookies\r\n        /*$(window).on('load', function () {\r\n            $('[data-anchor=\"user_profile\"]').find('form[id].sayt').each(function () {\r\n                var $el = $(this);\r\n                $el.sayt(appModule.options.sayt);\r\n                // $el.find(':input').trigger('change');\r\n                $el.bootstrapValidator('validate');\r\n                console.log('#' + $el.attr('id') + ' restored from cookies and validated');\r\n            });\r\n        });*/\r\n\r\n\r\n\r\n        // If user currency field change, add change rate to user datas\r\n        $.when(appModule.currenciesData).done(function () {\r\n            $('#user_currencies').on('change', function () {\r\n                if ($(this).val()) {\r\n                    userData.currencies = {};\r\n                    $.each($(this).val(), function (i, currencyCode) {\r\n                        if (appModule.currenciesData[currencyCode]) {\r\n                            userData.currencies[currencyCode] = {};\r\n                            userData.currencies[currencyCode].changeRate = appModule.currenciesData[currencyCode].rate;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        appModule.deferred.ready.userProfile.resolve();\r\n        \r\n    });\r\n    \r\n    \r\n\r\n    return {\r\n        populateUserProfile: populateUserProfile\r\n    };\r\n\r\n})();\r\n\r\n"]}