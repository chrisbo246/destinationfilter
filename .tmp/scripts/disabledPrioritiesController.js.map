{"version":3,"sources":["../../app/scripts/disabledPrioritiesController.js"],"names":[],"mappings":"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","file":"disabledPrioritiesController.js","sourcesContent":["/*old-jslint indent: 2, unparam: true, plusplus: true */\r\n/*\r\njslint\r\n    devel: true,\r\n    browser: true,\r\n    node: false\r\n*/\r\n/*\r\nglobal\r\n    $,\r\n    Handlebars,\r\n    initBlock,\r\n    deferred: true,\r\n    options: true,\r\n    prioritiesData: true\r\n\r\n*/\r\n\r\nvar disabledPrioritiesModule = (function () {\r\n    'use strict';\r\n    \r\n    var options = {\r\n        sortable: {\r\n            connectWith: 'ul',\r\n            cursor: 'move',\r\n            forcePlaceholderSize: true,\r\n            handle: ':not(.disabled)',\r\n            helper: 'clone',\r\n            items: '> li:not(.disabled)', // > li:visible:not(.disabled)\r\n            opacity: 0.8,\r\n            placeholder: 'ui-sortable-placeholder',\r\n            revert: true,\r\n            scroll: true,\r\n            tolerance: 'pointer'\r\n            // axis: 'y',\r\n            // start: function (event, ui) {\r\n            //  $(this).parent().children('.ui-sortable-placeholder').height( $(this).height() );\r\n            // },\r\n            // containment: 'parent', // parent document window or a selector\r\n            // grid: [ 40, 40 ],\r\n            // cancel: '.disabled',\r\n        },\r\n        mixitupPriorities: {\r\n            animation: {\r\n                animateChangeLayout: true,\r\n                animateResizeTargets: true,\r\n                effects: 'fade rotateX(-40deg) translateZ(-100px)'\r\n            },\r\n            layout: {\r\n                // containerClass: 'list'\r\n            },\r\n            load: {\r\n                filter: '.popular'\r\n            },\r\n            selectors: {\r\n                target: '.mix',\r\n                filter: '#disabled_priorities_filters .filter',\r\n                sort: '#disabled_priorities_form .sort'\r\n            }\r\n            /*,\r\n                callbacks: {\r\n                  onMixEnd: _disabledPrioritiesButtonState()\r\n                }*/\r\n        }\r\n    };\r\n\r\n    \r\n    /**\r\n     * Restore enabled priorities from cookies\r\n     */\r\n    var _restoreCookies = function () {\r\n\r\n        console.time('Priorities restored from cookies');\r\n        \r\n        /*if ($.cookie('enabled_priorities')) {\r\n            $.each($.cookie('enabled_priorities').split(','), function (i, id) {\r\n                $('#' + id).find('.glyphicon-plus').removeClass('glyphicon-plus').addClass('glyphicon-remove');\r\n                $('#' + id).appendTo('#enabled_priorities');\r\n            });\r\n        }*/\r\n        \r\n        var $el = $('#stored_priorities');\r\n        if ($el) {\r\n            $el.garlic({\r\n                excluded: '',\r\n                onRetrieve: function (elem, retrievedValue) {\r\n                    $.each(retrievedValue.split(','), function (i, id) {\r\n                        $('#' + id).find('.glyphicon-plus').removeClass('glyphicon-plus').addClass('glyphicon-remove');\r\n                        $('#' + id).appendTo('#enabled_priorities');\r\n                    });\r\n                },\r\n                onPersist: function (elem, storedValue) {\r\n\r\n                }\r\n            });\r\n        }\r\n        \r\n        $('#enabled_priorities').trigger('sortreceive');\r\n        \r\n        console.timeEnd('Priorities restored from cookies');\r\n\r\n    };\r\n                    \r\n                    \r\n    /**\r\n     * Toggle button state\r\n     */\r\n\r\n    var _disabledPrioritiesButtonState = function () { // state, futureState\r\n        console.time('_disabledPrioritiesButtonState function executed');\r\n\r\n        var $el = $('#disabled_priorities');\r\n\r\n        // Toggle #enable_all_priorities button visibility\r\n        if ($el.find('li:visible').length > 0) {\r\n            $('#enable_all_priorities').removeClass('disabled');\r\n        } else {\r\n            $('#enable_all_priorities').addClass('disabled');\r\n            $('#enable_selected_priorities').addClass('disabled');\r\n        }\r\n\r\n        // Toggle #enable_selected_priorities button visibility\r\n        if ($el.find('li.active:visible').length > 0) {\r\n            $('#enable_selected_priorities').removeClass('disabled');\r\n        } else {\r\n            $('#enable_selected_priorities').addClass('disabled');\r\n        }\r\n\r\n        console.timeEnd('_disabledPrioritiesButtonState function executed');\r\n\r\n    }\r\n\r\n    \r\n    \r\n    $(function () {\r\n\r\n        /*\r\n        $.get('templates/assets/disabledPrioritiesModal.hbs', function (source) {\r\n            console.time('disabledPrioritiesModal.hbs view loaded');\r\n\r\n            // Load priorities from JSON file\r\n            $.getJSON('data/disabledPrioritiesModal.json', function (json) {\r\n                var viewData,\r\n                    // rendered,\r\n                    filters = [];\r\n\r\n                // Draw disabled priorities and filters\r\n                prioritiesData = json;\r\n                appModule.deferred.getJSON.prioritiesData.resolve();\r\n            });\r\n        */\r\n                /*\r\n                $.each(json, function (i, v) {\r\n                    v.order = i;\r\n                    if (v.filters) {\r\n                        filters = filters.concat(v.filters.split(/\\s+/));\r\n                    }\r\n                    if (v.reverse) {\r\n                        v.checked = 'checked';\r\n                        v.dataInverse = 'true';\r\n                        v.dataOffColor = 'primary';\r\n                        v.dataOnColor = 'default';\r\n                    } else {\r\n                        v.checked = '';\r\n                        v.dataInverse = 'false';\r\n                        v.dataOffColor = 'default';\r\n                        v.dataOnColor = 'primary';\r\n                    }\r\n                });\r\n                filters = $.distinct(filters);\r\n\r\n                viewData = {\r\n                    disabledPriorities: json,\r\n                    disabledPrioritiesFilters: filters\r\n                };\r\n\r\n                // Append disabled priorities modal to body\r\n                var template = Handlebars.compile(source);\r\n                //$('body').append(template(viewData));\r\n                $('#disabled_priorities_modal').replaceWith(template(viewData));\r\n\r\n                */\r\n\r\n                appModule.initBlock('#disabled_priorities_modal');\r\n\r\n                var $el = $('#disabled_priorities');\r\n\r\n                // When #disabled_priorities modal open\r\n                $('#disabled_priorities_modal').one('shown.bs.modal', function () {\r\n\r\n                    // Initialize MixItUp on #disabled_priorities (only if not already)\r\n                    if (!$el.mixItUp('isLoaded')) {\r\n\r\n                        console.log('Load MixItUp on #disabled_priorities');\r\n                        $el.mixItUp(options.mixitupPriorities);\r\n\r\n\r\n                        $el.on('mixEnd', function () { // e, state\r\n                            _disabledPrioritiesButtonState();\r\n                        });\r\n\r\n                        // Filter selector (for select field only)\r\n                        $('#disabled_priorities_filters')\r\n                            .val(options.mixitupPriorities.load.filter || 'all')\r\n                            .on('change', function () {\r\n                                $el.mixItUp('filter', this.value);\r\n                                console.log('Disabled priorities filter changed to ' + this.value);\r\n                            });\r\n\r\n                        /*\r\n                        // Sort order selector\r\n                        $('#disabled_priorities_sort')\r\n                            .on('change', function () {\r\n                                $el.mixItUp('sort', this.value);\r\n                                console.log('Disabled priorities order changed to ' + this.value);\r\n                            });\r\n                        */\r\n\r\n                        // Layout selector\r\n                        $('#disabled_priorities_layout')\r\n                            .on('change', function () {\r\n                                $el.mixItUp('changeLayout', {\r\n                                    containerClass: this.value\r\n                                });\r\n                                console.log('Disabled priorities layout changed to ' + this.value);\r\n                            }).trigger('change');\r\n\r\n\r\n\r\n                    }\r\n\r\n                })\r\n                // Trigger Mixitup filter each time the modal is opened to ensure that new disabled priorities will be visible\r\n                .on('shown.bs.modal', function () {\r\n                    if ($el.mixItUp('isLoaded')) {\r\n                        //$('#disabled_priorities_filters').trigger('change');\r\n                        // $el.mixItUp('filter')\r\n                    }\r\n                });\r\n\r\n\r\n                // On sortable disabled_priorities change\r\n                $el\r\n                    .sortable(options.sortable)\r\n                    .disableSelection()\r\n                    .on('sortstop sortreceive sortremove', function () { // event, ui\r\n\r\n                        var ids = $(this).sortable('toArray');\r\n\r\n                        // Disable profile fields required if no longer needed by user priorities\r\n                        $.each(ids, function (i, value) {\r\n                            if (value === 'speaking_language_priority') {\r\n                                $('#user_speaking_languages').prop('required', false);\r\n                            }\r\n                            if (value === 'reading_language_priority') {\r\n                                $('#user_reading_languages').prop('required', false);\r\n                            }\r\n                            if (value === 'visa_free_priority') {\r\n                                $('#user_citizenships').prop('required', false);\r\n                            }\r\n                            if (value === 'currency_priority' || value === 'change_rate_priority') {\r\n                                $('#user_currencies').prop('required', false);\r\n                            }\r\n                            if (value === 'ac_plugs_priority' || value === 'ac_voltages_priority') {\r\n                                $('#user_plug_types').prop('required', false);\r\n                                $('#user_plug_voltages').prop('required', false);\r\n                            }\r\n                            if (value === 'income_level_priority') {\r\n                                $('#user_income_level').prop('required', false);\r\n                            }\r\n                        });\r\n\r\n                        _disabledPrioritiesButtonState();\r\n\r\n                    })\r\n                    .trigger('sortstop');\r\n\r\n\r\n                // Enable selected button\r\n                $('#enable_selected_priorities').on('click', function (e) {\r\n                    e.preventDefault();\r\n                    var array = [];\r\n                    $.each($el.find('li.active:visible'), function () { // i, id\r\n                        $(this)\r\n                            .removeClass('active')\r\n                            .removeAttr('style')\r\n                            .show();\r\n                        $(this).find('.glyphicon-plus').removeClass('glyphicon-plus').addClass('glyphicon-remove');\r\n                        array.push($(this));\r\n                    });\r\n\r\n                    $('#enabled_priorities').append(array).trigger('sortreceive');\r\n                    $el.trigger('sortremove');\r\n                });\r\n\r\n                // Highlight sortable item when user click it\r\n                $el.on('click', 'li:not(.disabled)', function () {\r\n                    $(this).toggleClass('active');\r\n                    _disabledPrioritiesButtonState();\r\n                });\r\n\r\n                $.when(appModule.deferred.ready.enabledPriorities).done(function () {\r\n                    \r\n                    _restoreCookies();\r\n                    \r\n                    // Enable all button\r\n                    $('#enable_all_priorities').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        var array = [];\r\n                        $.each($el.find('li:visible'), function () { // i, id\r\n                            $(this)\r\n                                .removeClass('active')\r\n                                .removeAttr('style')\r\n                                .show();\r\n                            $(this).find('.glyphicon-plus').removeClass('glyphicon-plus').addClass('glyphicon-remove');\r\n                            array.push($(this));\r\n                        });\r\n                        $('#enabled_priorities').append(array).trigger('sortreceive');\r\n                        $el.trigger('sortremove');\r\n                    });\r\n\r\n                    // Enable button\r\n                    $el.on('click', '.switch-priority', function (e) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                        var $block = $(this).closest('.list-group-item');\r\n                        $block.removeClass('active').removeAttr('style');\r\n                        $(this).find('.glyphicon-plus').removeClass('glyphicon-plus').addClass('glyphicon-remove');\r\n                        $('#enabled_priorities').append($block).trigger('sortreceive');\r\n                        $el.trigger('sortremove');\r\n                        console.log('Priority switched');\r\n                    });\r\n\r\n                    $el.on('click', '.bootstrap-switch-container', function (e) { // event, state\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    });\r\n                    /*$el.on('switchChange.bootstrapSwitch', '.reverse-priority', function (e) { // event, state\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    });*/\r\n\r\n                    appModule.deferred.ready.priorities.resolve();\r\n                });\r\n\r\n                appModule.deferred.ready.disabledPriorities.resolve();\r\n\r\n\r\n        /*\r\n            });\r\n\r\n            console.timeEnd('disabledPrioritiesModal.hbs view loaded');\r\n\r\n        });\r\n        */\r\n        \r\n    });\r\n\r\n})();\r\n\r\n"]}