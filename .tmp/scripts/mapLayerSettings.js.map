{"version":3,"sources":["../../app/scripts/mapLayerSettings.js"],"names":[],"mappings":"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","file":"mapLayerSettings.js","sourcesContent":["/*old-jslint indent: 2, unparam: true, plusplus: true */\r\n/*\r\njslint\r\n    devel: true,\r\n    browser: true,\r\n    node: false\r\n*/\r\n/*\r\nglobal\r\n    $,\r\n    ol,\r\n    deferred: true,\r\n    map: false,\r\n    layer: true,\r\n    noWebglInfo: true,\r\n    noDownloadInfo: true,\r\n    exampleNS: true,\r\n    layerSwitcher: false\r\n*/\r\n\r\nvar mapSelectedLayerSettingsModule = (function (mapModule) {\r\n    'use strict';\r\n    \r\n    console.time('Selected layer settings initialized');\r\n\r\n    var _setResetBrightnessButtonHTML = function () {\r\n        \r\n        resetBrightness.innerHTML = 'Brightness (' + layer.getBrightness().toFixed(3) + ')';\r\n    }\r\n\r\n    var _setResetContrastButtonHTML = function () {\r\n        \r\n        resetContrast.innerHTML = 'Contrast (' + layer.getContrast().toFixed(3) + ')';\r\n    }\r\n\r\n    var _setResetHueButtonHTML = function () {\r\n        \r\n        resetHue.innerHTML = 'Hue (' + layer.getHue().toFixed(2) + ')';\r\n    }\r\n\r\n    var _setResetSaturationButtonHTML = function () {\r\n        \r\n        resetSaturation.innerHTML = 'Saturation (' + layer.getSaturation().toFixed(2) + ')';\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * image-filter\r\n     */\r\n\r\n    var _normalize = function (kernel) {\r\n        \r\n        var len = kernel.length,\r\n            normal = new Array(len),\r\n            i = 0,\r\n            sum = 0;\r\n\r\n        for (i = 0; i < len; i = i + 1) {\r\n            sum += kernel[i];\r\n        }\r\n        if (sum <= 0) {\r\n            normal.normalized = false;\r\n            sum = 1;\r\n        } else {\r\n            normal.normalized = true;\r\n        }\r\n        for (i = 0; i < len; i = i + 1) {\r\n            normal[i] = kernel[i] / sum;\r\n        }\r\n        return normal;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * image-filter\r\n     */\r\n\r\n    /**\r\n     * Apply a convolution kernel to canvas.  This works for any size kernel, but\r\n     * performance starts degrading above 3 x 3.\r\n     * @param {CanvasRenderingContext2D} context Canvas 2d context.\r\n     * @param {Array.<number>} kernel Kernel.\r\n     */\r\n    var _convolve = function (context, kernel) {\r\n        \r\n        var canvas = context.canvas,\r\n            width = canvas.width,\r\n            height = canvas.height,\r\n            size = Math.sqrt(kernel.length),\r\n            half = Math.floor(size / 2),\r\n            inputData = context.getImageData(0, 0, width, height).data,\r\n            output = context.createImageData(width, height),\r\n            outputData = output.data,\r\n            pixelsAbove,\r\n            pixelY,\r\n            pixelX,\r\n            kernelY,\r\n            kernelX,\r\n            weight,\r\n            neighborY,\r\n            neighborX,\r\n            inputIndex,\r\n            outputIndex,\r\n            r,\r\n            g,\r\n            b,\r\n            a;\r\n\r\n        for (pixelY = 0; pixelY < height; pixelY = pixelY + 1) {\r\n            pixelsAbove = pixelY * width;\r\n            for (pixelX = 0; pixelX < width; pixelX = pixelX + 1) {\r\n                r = 0;\r\n                g = 0;\r\n                b = 0;\r\n                a = 0;\r\n                for (kernelY = 0; kernelY < size; kernelY = kernelY + 1) {\r\n                    for (kernelX = 0; kernelX < size; kernelX = kernelX + 1) {\r\n                        weight = kernel[kernelY * size + kernelX];\r\n                        neighborY = Math.min(height - 1, Math.max(0, pixelY + kernelY - half));\r\n                        neighborX = Math.min(width - 1, Math.max(0, pixelX + kernelX - half));\r\n                        inputIndex = (neighborY * width + neighborX) * 4;\r\n                        r += inputData[inputIndex] * weight;\r\n                        g += inputData[inputIndex + 1] * weight;\r\n                        b += inputData[inputIndex + 2] * weight;\r\n                        a += inputData[inputIndex + 3] * weight;\r\n                    }\r\n                }\r\n                outputIndex = (pixelsAbove + pixelX) * 4;\r\n                outputData[outputIndex] = r;\r\n                outputData[outputIndex + 1] = g;\r\n                outputData[outputIndex + 2] = b;\r\n                outputData[outputIndex + 3] = kernel.normalized ? a : 255;\r\n            }\r\n        }\r\n        context.putImageData(output, 0, 0);\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     */\r\n\r\n    var _selectedLayerActions = function (layer) {\r\n        \r\n        // var raster = layer;\r\n\r\n        mapModule.map.on('change:projection', function () {\r\n            var projection = mapModule.map.getProjection();\r\n            $('#projection_extent').val(layer.getExtent());\r\n            // ol.proj.setExtent($projection.value);\r\n\r\n            $('#projection_code').val(projection.getCode());\r\n            $('#projection_metersperunit').val(projection.getMetersPerUnit());\r\n            $('#projection_unit').val(projection.getUnits());\r\n            $('#projection_global').val(projection.isGlobal());\r\n            // update unit in input-group-addon\r\n            $('#top, #left, #bottom, #right, #center_x, #center_y, #resolution, #longitude, #latitude').next('.input-group-addon').html(projection.getUnits());\r\n        });\r\n\r\n        if (!ol.has.WEBGL) {\r\n            noWebglInfo.style.display = '';\r\n        } else {\r\n\r\n            /**\r\n             * brightness-contrast\r\n             */\r\n\r\n            _setResetBrightnessButtonHTML();\r\n\r\n            increaseBrightness.addEventListener('click', function () {\r\n                layer.setBrightness(Math.min(layer.getBrightness() + 0.125, 1));\r\n                _setResetBrightnessButtonHTML();\r\n            }, false);\r\n            resetBrightness.addEventListener('click', function () {\r\n                layer.setBrightness(0);\r\n                _setResetBrightnessButtonHTML();\r\n            }, false);\r\n            decreaseBrightness.addEventListener('click', function () {\r\n                layer.setBrightness(Math.max(layer.getBrightness() - 0.125, -1));\r\n                _setResetBrightnessButtonHTML();\r\n            }, false);\r\n\r\n            _setResetContrastButtonHTML();\r\n\r\n            increaseContrast.addEventListener('click', function () {\r\n                layer.setContrast(layer.getContrast() + 0.125);\r\n                _setResetContrastButtonHTML();\r\n            }, false);\r\n            resetContrast.addEventListener('click', function () {\r\n                layer.setContrast(1);\r\n                _setResetContrastButtonHTML();\r\n            }, false);\r\n            decreaseContrast.addEventListener('click', function () {\r\n                layer.setContrast(Math.max(layer.getContrast() - 0.125, 0));\r\n                _setResetContrastButtonHTML();\r\n            }, false);\r\n\r\n            /**\r\n             * hue-saturation\r\n             */\r\n\r\n            _setResetHueButtonHTML();\r\n\r\n            increaseHue.addEventListener('click', function () {\r\n                layer.setHue(layer.getHue() + 0.25);\r\n                _setResetHueButtonHTML();\r\n            }, false);\r\n            resetHue.addEventListener('click', function () {\r\n                layer.setHue(0);\r\n                _setResetHueButtonHTML();\r\n            }, false);\r\n            decreaseHue.addEventListener('click', function () {\r\n                layer.setHue(layer.getHue() - 0.25);\r\n                _setResetHueButtonHTML();\r\n            }, false);\r\n\r\n            _setResetSaturationButtonHTML();\r\n\r\n            increaseSaturation.addEventListener('click', function () {\r\n                layer.setSaturation(layer.getSaturation() + 0.25);\r\n                _setResetSaturationButtonHTML();\r\n            }, false);\r\n            resetSaturation.addEventListener('click', function () {\r\n                layer.setSaturation(1);\r\n                _setResetSaturationButtonHTML();\r\n            }, false);\r\n            decreaseSaturation.addEventListener('click', function () {\r\n                layer.setSaturation(Math.max(layer.getSaturation() - 0.25, 0));\r\n                _setResetSaturationButtonHTML();\r\n            }, false);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     */\r\n\r\n    var _vectorLayerActions = function (layer) {\r\n        \r\n        var vector = layer;\r\n\r\n        if ('download' in exportKMLElement) {\r\n            var vectorSource = vector.getSource();\r\n            exportKMLElement.addEventListener('click', function () {\r\n                if (!exportKMLElement.href) {\r\n                    var features = [],\r\n                        string = new ol.format.KML().writeFeatures(features),\r\n                        base64 = exampleNS.strToBase64(string);\r\n                    vectorSource.forEachFeature(function (feature) {\r\n                        var clone = feature.clone(),\r\n                            projection = mapModule.map.getProjection();\r\n                        clone.setId(feature.getId()); // clone does not set the id\r\n                        clone.getGeometry().transform(projection, 'EPSG:4326');\r\n                        features.push(clone);\r\n                    });\r\n                    exportKMLElement.href = 'data:application/vnd.google-earth.kml+xml;base64,' + base64;\r\n                }\r\n            }, false);\r\n        } else {\r\n            noDownloadInfo.style.display = '';\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     */\r\n\r\n    var _imageryLayerActions = function (layer) {\r\n        \r\n        var imagery = layer;\r\n\r\n        /**\r\n         * Apply a filter on \"postcompose\" events.\r\n         * @param {ol.render.Event} event Render event.\r\n         */\r\n        imagery.on('postcompose', function (event) {\r\n            _convolve(event.context, selectedKernel);\r\n        });\r\n\r\n\r\n        /**\r\n         * image-filter\r\n         */\r\n\r\n        var kernels = {\r\n            none: [0, 0, 0, 0, 1, 0, 0, 0, 0],\r\n            sharpen: [0, -1, 0, -1, 5, -1, 0, -1, 0],\r\n            sharpenless: [0, -1, 0, -1, 10, -1, 0, -1, 0],\r\n            blur: [1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n            shadow: [1, 2, 1, 0, 1, 0, -1, -2, -1],\r\n            emboss: [-2, 1, 0, -1, 1, 1, 0, 1, 2],\r\n            edge: [0, 1, 0, 1, -4, 1, 0, 1, 0]\r\n        };\r\n\r\n        var selectedKernel = _normalize(kernels[kernel.value]);\r\n\r\n        /**\r\n         * Update the kernel and re-render on change.\r\n         */\r\n        kernel.onchange = function () {\r\n            selectedKernel = _normalize(kernels[kernel.value]);\r\n            mapModule.map.render();\r\n        };\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    \r\n    $(function () {\r\n        \r\n        var decreaseBrightness = document.getElementById('decrease-brightness');\r\n        var decreaseContrast = document.getElementById('decrease-contrast');\r\n        var decreaseHue = document.getElementById('decrease-hue');\r\n        var decreaseSaturation = document.getElementById('decrease-saturation');\r\n        var increaseBrightness = document.getElementById('increase-brightness');\r\n        var increaseContrast = document.getElementById('increase-contrast');\r\n        var increaseHue = document.getElementById('increase-hue');\r\n        var increaseSaturation = document.getElementById('increase-saturation');\r\n        var resetBrightness = document.getElementById('reset-brightness');\r\n        var resetContrast = document.getElementById('reset-contrast');\r\n        var resetHue = document.getElementById('reset-hue');\r\n        var resetSaturation = document.getElementById('reset-saturation');\r\n        var kernel = document.getElementById('kernel');\r\n        var exportKMLElement = document.getElementById('export-kml');\r\n        var baseLayerInput = document.getElementById('base_layer_source');\r\n        var overlayLayerInput = document.getElementById('overlay_layer_source');\r\n        var vectorLayerInput = document.getElementById('vector_layer_source');\r\n\r\n        // Populate layer selector inputs\r\n        ol.control.LayerSwitcher.forEachRecursive(map, function (l) { // l, i, a\r\n            \r\n            var option;\r\n\r\n            if (!(l instanceof ol.layer.Group)) {\r\n                if (l.get('type') === 'base') {\r\n                    option = document.createElement('option');\r\n                    option.text = l.get('title');\r\n                    option.value = l.get('name');\r\n                    if (l.getVisible()) {\r\n                        option.selected = true;\r\n                    }\r\n                    baseLayerInput.appendChild(option);\r\n\r\n                } else {\r\n                    option = document.createElement('option');\r\n                    option.text = l.get('title');\r\n                    option.value = l.get('name');\r\n                    if (l.getVisible()) {\r\n                        option.selected = true;\r\n                    }\r\n                    overlayLayerInput.appendChild(option);\r\n                }\r\n\r\n                if (l instanceof ol.layer.Vector) {\r\n                    option = document.createElement('option');\r\n                    option.text = l.get('title');\r\n                    option.value = l.get('name');\r\n                    if (l.getVisible()) {\r\n                        option.selected = true;\r\n                    }\r\n                    vectorLayerInput.appendChild(option);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        // Change base layer from the select input\r\n        baseLayerInput.addEventListener('change', function () {\r\n            ol.control.LayerSwitcher.forEachRecursive(map, function (layer) { // l, i, a\r\n                if (layer.get('name') === baseLayerInput.value) {\r\n                    mapControlsModule.layerSwitcher.setVisible_(layer, 1);\r\n                }\r\n            });\r\n        }, false);\r\n\r\n        // Change overlay layer from the select input\r\n        overlayLayerInput.addEventListener('change', function () {\r\n            ol.control.LayerSwitcher.forEachRecursive(map, function (layer) { // l, i, a\r\n                if (layer.get('name') === overlayLayerInput.value) {\r\n                    mapControlsModule.layerSwitcher.setVisible_(layer, 1);\r\n                }\r\n            });\r\n        }, false);\r\n\r\n        /*$('#base_layer_source, #overlay_layer_source, #vector_layer_source').on('change', function () {\r\n            \r\n            var $el = $(this);\r\n            ol.control.LayerSwitcher.forEachRecursive(map, function (l, i, a) { // l, i, a\r\n                if (l.get('name') === $el.val()) {\r\n                    mapControlsModule.layerSwitcher.setVisible_(l, 1);\r\n                    // if (l != lyr && l.get('type') === 'base') {\r\n                    //  l.setVisible(true);\r\n                    // }\r\n                }\r\n            });\r\n        });*/\r\n\r\n        \r\n        \r\n         $.when(appModule.deferred.ready.map).done(function () {\r\n             \r\n            // When a layer become visible\r\n            mapModule.map.on('change:layers', function () {\r\n                ol.control.LayerSwitcher.forEachRecursive(map, function (l) { // l, i, a\r\n                    if (!(l instanceof ol.layer.Group) && l.getVisible()) {\r\n                        if (l.get('type') === 'base') {\r\n                            _imageryLayerActions(l);\r\n                        } else if (l.get('type') === 'vector') {\r\n                            _vectorLayerActions(l);\r\n                        } else {\r\n                            _selectedLayerActions(l);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            console.timeEnd('Selected layer settings initialized');\r\n\r\n        });\r\n            \r\n    });\r\n\r\n    return mapModule;\r\n    \r\n})(mapModule || {});\r\n"]}